<!DOCTYPE html>
<html lang="it">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>BIRRA AI - SUPREME v11</title>
    <style>
        :root { --gold: #ffcc00; --bg: #000; --card: #0d0d0d; --green: #00ff41; --red: #ff3131; }
        body { background: var(--bg); color: white; font-family: 'Inter', sans-serif; margin: 0; overflow-x: hidden; }
        
        /* Navbar con Menu a Tendina */
        .navbar { display: flex; justify-content: space-between; align-items: center; padding: 15px 20px; border-bottom: 1px solid #1a1a1a; background: #000; position: sticky; top: 0; z-index: 1000; }
        .nav-logo { display: flex; align-items: center; gap: 10px; font-weight: 900; color: var(--gold); letter-spacing: 2px; font-size: 0.9rem; }
        .logo-small { width: 35px; height: 35px; border-radius: 50%; border: 1px solid var(--gold); }
        
        .dropdown { position: relative; display: inline-block; }
        .dropbtn { background: none; border: 1px solid #333; color: var(--gold); padding: 8px 15px; border-radius: 8px; font-size: 0.8rem; font-weight: bold; }
        .dropdown-content { display: none; position: absolute; right: 0; background-color: #111; min-width: 160px; box-shadow: 0px 8px 16px rgba(0,0,0,0.5); border: 1px solid #222; border-radius: 10px; z-index: 1; }
        .dropdown-content a { color: white; padding: 12px 16px; text-decoration: none; display: block; font-size: 0.8rem; border-bottom: 1px solid #222; }
        .dropdown-content a:hover { background-color: #1a1a1a; color: var(--gold); }
        .show { display: block; }

        /* Coin Selector */
        .coin-wrap { display: flex; justify-content: space-around; padding: 15px; background: #050505; }
        .coin-btn { background: #111; border: 1px solid #222; color: #666; padding: 8px 15px; border-radius: 10px; font-size: 0.75rem; font-weight: bold; }
        .coin-btn.active { border-color: var(--gold); color: var(--gold); background: rgba(255,204,0,0.1); }

        /* Main Display */
        .display { padding: 25px 20px; text-align: center; }
        #price { font-size: 3.5rem; font-weight: 900; margin: 0; letter-spacing: -2px; font-variant-numeric: tabular-nums; }
        #change { font-weight: bold; margin-top: 5px; font-size: 1.2rem; }

        .chart-box { height: 300px; margin: 10px; border-radius: 20px; overflow: hidden; border: 1px solid #1a1a1a; }

        /* Nuova Funzione: Portfolio Calculator */
        .tool-box { background: var(--card); margin: 15px; padding: 20px; border-radius: 20px; border: 1px solid #1a1a1a; }
        .tool-label { font-size: 0.65rem; color: #555; text-transform: uppercase; margin-bottom: 10px; }
        .tool-input-row { display: flex; gap: 10px; align-items: center; }
        .t-input { background: #000; border: 1px solid #333; color: var(--gold); padding: 12px; border-radius: 10px; width: 60%; font-weight: bold; }
        .t-result { width: 40%; font-size: 1.1rem; font-weight: 900; text-align: right; }

        /* Tasto Azione Finale */
        .btn-supreme { display: block; width: calc(100% - 40px); margin: 25px 20px; padding: 22px; background: linear-gradient(45deg, var(--gold), #ffaa00); color: black; border: none; border-radius: 20px; font-weight: 900; text-transform: uppercase; font-size: 1.1rem; box-shadow: 0 10px 30px rgba(255,204,0,0.2); animation: pulse 2s infinite; cursor: pointer; }
        @keyframes pulse { 0% { transform: scale(1); } 50% { transform: scale(1.02); } 100% { transform: scale(1); } }
    </style>
</head>
<body>

    <div class="navbar">
        <div class="nav-logo">
            <img src="7418a0a9-2f5b-4366-8d18-20224213038d.jpg" class="logo-small" onerror="this.src='https://via.placeholder.com/35/ffcc00/000000?text=G'">
            <span>QUANTUM SUPREME</span>
        </div>
        <div class="dropdown">
            <button onclick="toggleMenu()" class="dropbtn">MENU ☰</button>
            <div id="myDropdown" class="dropdown-content">
                <a href="#" onclick="alert('Versione 11.0.4 - 2026')">Info Sistema</a>
                <a href="#" onclick="window.location.reload()">Aggiorna Dati</a>
                <a href="https://www.binance.com/it/markets">Mercati Live</a>
                <a href="#" style="color:var(--red)" onclick="toggleMenu()">Chiudi</a>
            </div>
        </div>
    </div>

    <div class="coin-wrap">
        <div class="coin-btn active" onclick="switchAsset('BTCUSDT', this)">BITCOIN</div>
        <div class="coin-btn" onclick="switchAsset('ETHUSDT', this)">ETHEREUM</div>
        <div class="coin-btn" onclick="switchAsset('SOLUSDT', this)">SOLANA</div>
    </div>

    <div class="display">
        <div id="price">$ --.---</div>
        <div id="change">0.00%</div>
    </div>

    <div class="chart-box">
        <div id="tv_chart" style="height: 100%;"></div>
    </div>

    <div class="tool-box">
        <div class="tool-label">Calcolatore Portafoglio (Inserisci quantità)</div>
        <div class="tool-input-row">
            <input type="number" id="amount" class="t-input" value="0.5" oninput="calcValue()">
            <div id="total-val" class="t-result">$ 0.00</div>
        </div>
    </div>

    <button class="btn-supreme" onclick="openEliteMarket()">⚡ ESEGUI ORDINE ELITE</button>

    <script type="text/javascript" src="https://s3.tradingview.com/tv.js"></script>
    <script>
        let currentCoin = 'BTCUSDT';
        let currentPrice = 0;

        function toggleMenu() {
            document.getElementById("myDropdown").classList.toggle("show");
        }

        // Chiudi menu se clicchi fuori
        window.onclick = function(event) {
            if (!event.target.matches('.dropbtn')) {
                var dropdowns = document.getElementsByClassName("dropdown-content");
                for (var i = 0; i < dropdowns.length; i++) {
                    var openDropdown = dropdowns[i];
                    if (openDropdown.classList.contains('show')) {
                        openDropdown.classList.remove('show');
                    }
                }
            }
        }

        function loadTV(symbol) {
            new TradingView.widget({
                "autosize": true, "symbol": "BINANCE:" + symbol, "interval": "60", "timezone": "Etc/UTC",
                "theme": "dark", "style": "1", "locale": "it", "enable_publishing": false,
                "hide_top_toolbar": true, "container_id": "tv_chart"
            });
        }

        function switchAsset(symbol, btn) {
            currentCoin = symbol;
            document.querySelectorAll('.coin-btn').forEach(b => b.classList.remove('active'));
            btn.classList.add('active');
            loadTV(symbol);
            updatePrice();
        }

        async function updatePrice() {
            try {
                const r = await fetch(`https://api.binance.com/api/v3/ticker/24hr?symbol=${currentCoin}`);
                const d = await r.json();
                currentPrice = parseFloat(d.lastPrice);
                const perc = parseFloat(d.priceChangePercent);

                document.getElementById('price').innerText = "$" + currentPrice.toLocaleString();
                const cEl = document.getElementById('change');
                cEl.innerText = (perc >= 0 ? '+' : '') + perc.toFixed(2) + "%";
                cEl.style.color = perc >= 0 ? '#00ff41' : '#ff3131';
                calcValue();
            } catch (e) { console.log("API error"); }
        }

        function calcValue() {
            const qty = document.getElementById('amount').value;
            const total = qty * currentPrice;
            document.getElementById('total-val').innerText = "$" + total.toLocaleString(undefined, {maximumFractionDigits: 2});
        }

        function openEliteMarket() {
            const url = "https://www.binance.com/it/register?ref=TUO_CODICE";
            try {
                let w = window.open(url, '_blank');
                if(!w || w.closed) { window.location.href = url; }
            } catch(e) { window.location.assign(url); }
        }

        loadTV(currentCoin);
        updatePrice();
        setInterval(updatePrice, 10000);
    </script>
</body>
</html>
