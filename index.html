<!DOCTYPE html>
<html lang="it">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>BIRRA AI - SUPER TERMINAL</title>
    
    <link rel="manifest" href="manifest.json">
    <meta name="theme-color" content="#000000">

    <style>
        :root { --gold: #ffcc00; --bg: #000; --card: #0a0a0a; --green: #00ff41; --red: #ff3131; }
        
        /* SPLASH SCREEN */
        #splash-screen {
            position: fixed; top: 0; left: 0; width: 100vw; height: 100vh;
            background: #000; display: flex; flex-direction: column;
            justify-content: center; align-items: center; z-index: 10000;
            transition: opacity 0.8s ease, visibility 0.8s;
        }
        .splash-logo { width: 140px; height: 140px; border-radius: 50%; animation: pulse-gold 2s infinite; object-fit: cover; }
        @keyframes pulse-gold {
            0% { transform: scale(1); filter: drop-shadow(0 0 2px var(--gold)); }
            70% { transform: scale(1.05); filter: drop-shadow(0 0 15px var(--gold)); }
            100% { transform: scale(1); filter: drop-shadow(0 0 2px var(--gold)); }
        }

        /* UI APP */
        body { background: var(--bg); color: white; font-family: 'Inter', sans-serif; margin: 0; overflow: hidden; height: 100vh; display: flex; flex-direction: column; }
        
        .navbar { display: flex; justify-content: space-between; align-items: center; padding: 10px 15px; border-bottom: 1px solid #1a1a1a; background: #000; }
        .logo-img { width: 35px; height: 35px; border-radius: 50%; border: 1px solid var(--gold); object-fit: cover; }
        .coin-select { background: #111; border: 1px solid var(--gold); color: var(--gold); padding: 5px; border-radius: 8px; font-size: 0.7rem; font-weight: bold; }

        .price-zone { padding: 15px 0; text-align: center; flex-shrink: 0; }
        #main-price { font-size: 2.8rem; font-weight: 900; margin: 0; letter-spacing: -2px; }
        #main-perc { font-weight: bold; font-size: 1rem; }

        .chart-container { flex-grow: 1; margin: 5px 10px; border-radius: 15px; overflow: hidden; border: 1px solid #1a1a1a; position: relative; }

        /* TASTO FISSO IN FONDO (MODIFICA CHIAVE) */
        .btn-gold-fixed {
            position: fixed;
            bottom: 20px;
            left: 15px;
            right: 15px;
            padding: 20px;
            background: linear-gradient(45deg, var(--gold), #ffaa00);
            color: black;
            border: none;
            border-radius: 18px;
            font-weight: 900;
            text-transform: uppercase;
            font-size: 1.1rem;
            box-shadow: 0 10px 30px rgba(0,0,0,0.8);
            z-index: 9999; /* Sopra a tutto */
            cursor: pointer;
            text-align: center;
        }

        .terminal-area { background: #050505; height: 120px; padding: 10px; font-family: 'Courier New', monospace; font-size: 0.7rem; border-top: 1px solid #1a1a1a; overflow-y: auto; color: #aaa; margin-bottom: 80px; /* Spazio per il tasto */ }
    </style>
</head>
<body>

    <div id="splash-screen">
        <img src="logo.png" class="splash-logo" alt="Logo">
        <h2 style="color:var(--gold); margin-top:15px; letter-spacing:3px;">BIRRA AI</h2>
    </div>

    <div class="navbar">
        <div style="display:flex; align-items:center; gap:10px;">
            <img src="logo.png" class="logo-img">
            <span style="color:var(--gold); font-weight:900; font-size:0.8rem;">TERMINAL v19</span>
        </div>
        <select class="coin-select" onchange="changeAsset(this.value)">
            <option value="BTCUSDT">BITCOIN (BTC)</option>
            <option value="ETHUSDT">ETHEREUM (ETH)</option>
            <option value="SOLUSDT">SOLANA (SOL)</option>
        </select>
    </div>

    <div class="price-zone">
        <div id="main-price">$ --.---</div>
        <div id="main-perc">0.00%</div>
    </div>

    <div class="chart-container">
        <div id="tradingview_widget" style="height: 100%;"></div>
    </div>

    <div class="terminal-area" id="log">
        > Birra AI Terminal Online...<br>
        > In attesa di segnali Binance...<br>
    </div>

    <button class="btn-gold-fixed" onclick="triggerHyperBypass()">âš¡ OPERA ORA SU BINANCE</button>

    <script type="text/javascript" src="https://s3.tradingview.com/tv.js"></script>
    <script>
        if ('serviceWorker' in navigator) { navigator.serviceWorker.register('sw.js'); }

        // Rimuovi splash
        window.addEventListener('load', () => {
            setTimeout(() => {
                document.getElementById('splash-screen').style.opacity = '0';
                setTimeout(() => document.getElementById('splash-screen').style.visibility = 'hidden', 800);
            }, 2500);
        });

        let currentAsset = 'BTCUSDT';
        function initTV(s) {
            new TradingView.widget({
                "autosize": true, "symbol": "BINANCE:" + s, "interval": "15", "theme": "dark",
                "style": "1", "locale": "it", "hide_top_toolbar": true, "container_id": "tradingview_widget"
            });
        }

        async function updatePrice() {
            try {
                const r = await fetch(`https://api.binance.com/api/v3/ticker/24hr?symbol=${currentAsset}`);
                const d = await r.json();
                document.getElementById('main-price').innerText = "$" + parseFloat(d.lastPrice).toLocaleString();
                const perc = parseFloat(d.priceChangePercent);
                const pEl = document.getElementById('main-perc');
                pEl.innerText = (perc >= 0 ? '+' : '') + perc + "%";
                pEl.style.color = perc >= 0 ? '#00ff41' : '#ff3131';
            } catch (e) {}
        }

        function triggerHyperBypass() {
            window.open("https://www.binance.com/it/trade/" + currentAsset.replace("USDT", "_USDT"), '_blank');
        }

        function changeAsset(v) { 
            currentAsset = v; 
            initTV(v); 
            updatePrice();
            document.getElementById('log').innerHTML += `> Asset cambiato: ${v}<br>`;
        }

        initTV(currentAsset);
        updatePrice();
        setInterval(updatePrice, 10000);
    </script>
</body>
</html>
